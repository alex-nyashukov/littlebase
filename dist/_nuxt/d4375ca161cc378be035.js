(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{536:function(e,t,o){"use strict";o(86);var n,r,l,d,c=o(22),h={data:function(){return{dialog:{isLoading:!1,isOpen:!1,model:{form:{render:function(){return""}}},oldModel:{}}}},computed:{isChanged:function(){return JSON.stringify(this.dialog.model)!==JSON.stringify(this.dialog.oldModel)},dialogTitle:function(){return this.dialog.model._id?"Edit item":"New item"}},methods:{open:(d=Object(c.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dialog.isLoading=!0,this.dialog.isOpen=!0,this.dialog.oldModel={},!t._id){e.next=9;break}return e.next=6,this.$store.dispatch("".concat(t.type,"/read"),{id:t._id});case 6:this.dialog.model=e.sent,e.next=10;break;case 9:this.dialog.model=t;case 10:console.log(this.dialog.model),Object.assign(this.dialog.oldModel,this.dialog.model),this.dialog.isLoading=!1;case 13:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)}),onClose:function(){this.isChanged?this.dialog.isOpen=!confirm("Close?"):this.dialog.isOpen=!1},save:(l=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dialog.oldModel={},!this.dialog.model._id){e.next=7;break}return e.next=4,this.$store.dispatch("".concat(this.dialog.model.type,"/update"),{updated_item:this.dialog.model});case 4:this.dialog.model=e.sent,e.next=10;break;case 7:return e.next=9,this.$store.dispatch("".concat(this.dialog.model.type,"/create"),{new_item:this.dialog.model});case 9:this.dialog.model=e.sent;case 10:Object.assign(this.dialog.oldModel,this.dialog.model);case 11:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),saveAndClose:(r=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.save();case 2:this.onClose();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),remove:(n=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("".concat(this.dialog.model.type,"/remove"),{id:this.dialog.model._id});case 2:this.dialog.isOpen=!1;case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}},m=o(26),v=o(29),f=o.n(v),_=o(99),k=o(537),x=o(535),w=o(562),C=o(125),O=o(155),V=o(528),y=o(563),component=Object(m.a)(h,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"900",scrollable:"",persistent:e.isChanged},model:{value:e.dialog.isOpen,callback:function(t){e.$set(e.dialog,"isOpen",t)},expression:"dialog.isOpen"}},[e.dialog.isLoading?o("v-card",{attrs:{color:"primary",dark:""}},[o("v-card-text",[e._v("\n      Please stand by\n      "),o("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1):o("v-card",[o("v-card-title",{domProps:{textContent:e._s(e.dialogTitle)}}),e._v(" "),o("v-card-text",[o(e.dialog.model.form,{tag:"component",attrs:{item:e.dialog.model}})],1),e._v(" "),o("v-card-actions",[this.dialog.model._id?o("v-btn",{staticClass:"ma-3",attrs:{dark:"",color:"red lighten-2"},on:{click:e.remove}},[e._v("Удалить")]):e._e(),e._v(" "),o("v-spacer"),e._v(" "),o("v-btn",{staticClass:"ma-3",on:{click:e.onClose}},[e._v("Закрыть")]),e._v(" "),[o("v-btn",{staticStyle:{"border-top-right-radius":"0","border-bottom-right-radius":"0"},attrs:{dark:"",color:"green lighten-2"},on:{click:e.save}},[e._v("Сохранить")]),e._v(" "),o("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[o("v-btn",e._g({staticClass:"ml-0",staticStyle:{"border-top-left-radius":"0","border-bottom-left-radius":"0"},attrs:{dark:"",color:"green lighten-2"},on:{click:e.saveAndClose}},n),[o("v-icon",{attrs:{color:"white"}},[e._v("fa-sign-out-alt")])],1)]}}])},[e._v(" "),o("span",[e._v("Save and close")])])]],2)],1)],1)}),[],!1,null,null,null);t.a=component.exports;f()(component,{VBtn:_.a,VCard:k.a,VCardActions:x.a,VCardText:x.b,VCardTitle:x.c,VDialog:w.a,VIcon:C.a,VProgressLinear:O.a,VSpacer:V.a,VTooltip:y.a})},570:function(e,t,o){"use strict";o.r(t);var n=o(171),r={transition:"fade",components:{AppModal:o(536).a},data:function(){return{table:{isLoading:!0,search:"",headers:[{text:"Tabnumber",value:"tabnumber"},{text:"Busnumber",value:"bus.busnumber"},{text:"Name",value:"name"}]}}},computed:{items:function(){return this.$store.getters["drivers/list"]}},methods:{onNewItem:function(){this.$refs.modal.open(new n.a)},onRowClick:function(e){this.$refs.modal.open(e)}},mounted:function(){var e=this;this.$store.dispatch("drivers/readAll").then((function(){e.table.isLoading=!1}))}},l=o(26),d=o(29),c=o.n(d),h=o(99),m=o(537),v=o(535),f=o(564),_=o(125),k=o(528),x=o(75),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{staticClass:"fade mt-5"},[o("v-card-title",[e._v("\n    Drivers\n    "),o("v-spacer"),e._v(" "),o("v-text-field",{attrs:{label:"Search"},model:{value:e.table.search,callback:function(t){e.$set(e.table,"search",t)},expression:"table.search"}}),e._v(" "),o("v-btn",{attrs:{fab:"",dark:"",absolute:"",top:"",right:"",color:"green lighten-2"},on:{click:e.onNewItem}},[o("v-icon",[e._v("fa-plus")])],1)],1),e._v(" "),o("v-data-table",{attrs:{loading:e.table.isLoading,headers:e.table.headers,search:e.table.search,items:e.items,"mobile-breakpoint":0,"loading-text":"Loading..."},on:{"click:row":e.onRowClick}}),e._v(" "),o("app-modal",{ref:"modal"})],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VBtn:h.a,VCard:m.a,VCardTitle:v.c,VDataTable:f.a,VIcon:_.a,VSpacer:k.a,VTextField:x.a})}}]);