(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{560:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l}));var r=n(0),o=n(561),c=Object(r.i)("v-card__actions"),l=Object(r.i)("v-card__text"),d=Object(r.i)("v-card__title");o.a},561:function(t,e,n){"use strict";n(10),n(8),n(7),n(6),n(9);var r=n(1),o=(n(17),n(179),n(141)),c=n(181),l=n(46),d=n(4);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(source,!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=Object(d.a)(c.a,l.a,o.a).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},outlined:Boolean,raised:Boolean},computed:{classes:function(){return h({"v-card":!0},l.a.options.computed.classes.call(this),{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.loading||this.disabled,"v-card--outlined":this.outlined,"v-card--raised":this.raised},o.a.options.computed.classes.call(this))},styles:function(){var style=h({},o.a.options.computed.styles.call(this));return this.img&&(style.background='url("'.concat(this.img,'") center center / cover no-repeat')),style}},methods:{genProgress:function(){var t=c.a.options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress"},[t]):null}},render:function(t){var e=this.generateRouteLink(),n=e.tag,data=e.data;return data.style=this.styles,this.isClickable&&(data.attrs=data.attrs||{},data.attrs.tabindex=0),t(n,this.setBackgroundColor(this.color,data),[this.genProgress(),this.$slots.default])}})},564:function(t,e,n){var content=n(565);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(13).default)("dc0628f2",content,!0,{sourceMap:!1})},565:function(t,e,n){(t.exports=n(12)(!1)).push([t.i,".v-tooltip{display:inline}.v-tooltip__content{background:rgba(97,97,97,.9);color:#fff;border-radius:4px;font-size:14px;line-height:22px;display:inline-block;padding:5px 16px;position:absolute;text-transform:none;width:auto;opacity:1;pointer-events:none}.v-tooltip__content--fixed{position:fixed}.v-tooltip__content[class*=-active]{transition-timing-function:cubic-bezier(0,0,.2,1)}.v-tooltip__content[class*=enter-active]{transition-duration:.15s}.v-tooltip__content[class*=leave-active]{transition-duration:75ms}",""])},571:function(t,e,n){var content=n(589);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(13).default)("a5c8b314",content,!0,{sourceMap:!1})},573:function(t,e,n){"use strict";var r=n(1),o=(n(17),n(564),n(144)),c=n(14),l=n(114),d=n(113),f=n(183),h=n(147),v=n(34),y=n(0),m=n(15),_=n(4);e.a=Object(_.a)(c.a,l.a,d.a,f.a,h.a,v.a).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String,zIndex:{default:null}},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!(this.bottom||this.left||this.top||this.right),r=!1!==this.attach?e.offsetLeft:e.left,o=0;return this.top||this.bottom||n?o=r+e.width/2-content.width/2:(this.left||this.right)&&(o=r+(this.right?e.width:-content.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(o,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!1!==this.attach?e.offsetTop:e.top,r=0;return this.top||this.bottom?r=n+(this.bottom?e.height:-content.height)+(this.bottom?10:-10):(this.left||this.right)&&(r=n+e.height/2-content.height/2),this.nudgeTop&&(r-=parseInt(this.nudgeTop)),this.nudgeBottom&&(r+=parseInt(this.nudgeBottom)),"".concat(this.calcYOverflow(r+this.pageYOffset),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(y.f)(this.maxWidth),minWidth:Object(y.f)(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(y.s)(this,"activator",!0)&&Object(m.b)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=o.a.options.methods.genActivatorListeners.call(this);return e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")},e.keydown=function(e){e.keyCode===y.x.esc&&(t.getActivator(e),t.runDelay("close"))},e}},render:function(t){var e,n=t("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(e={},Object(r.a)(e,this.contentClass,!0),Object(r.a)(e,"menuable__content__active",this.isActive),Object(r.a)(e,"v-tooltip__content--fixed",this.activatorFixed),e),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.showLazyContent(this.getContentSlot()));return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[t("transition",{props:{name:this.computedTransition}},[n]),this.genActivator()])}})},588:function(t,e,n){"use strict";var r=n(571);n.n(r).a},589:function(t,e,n){(t.exports=n(12)(!1)).push([t.i,".v-select__selections input{display:none!important}",""])},597:function(t,e,n){"use strict";n.r(e);n(49);var r=n(18),o=(n(26),n(28),n(2)),c=n.n(o),l=(n(10),n(8),n(7),n(6),n(9),n(1)),d={props:["value","items"]},f=(n(588),n(23)),h=n(25),v=n.n(h),y=n(531),m=n(573),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-select",{staticStyle:{"align-items":"center"},attrs:{editable:"","full-width":"",clearable:"","hide-details":"",items:t.items,value:t.value},on:{change:function(data){t.$emit("input",data)}},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.item;return[t._t("default",null,{item:n})]}},{key:"item",fn:function(e){var r=e.item;return[n("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){e.on;return[t._t("default",null,{item:r})]}}],null,!0)},[t._v(" "),n("v-slot",{attrs:{name:"tooltip",item:r}})],1)]}}],null,!0)})}),[],!1,null,null,null),_=component.exports;function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}v()(component,{VSelect:y.a,VTooltip:m.a});var x={components:{OutfitSelect:_},props:["size","way","field"],data:function(){return{}},computed:{statistic:function(){return this.$store.getters["outfit/statistic"]},item:function(){return this.$store.getters["outfit/item"](this.way._id)},drivers:function(){var t=this,e=this.$store.getters["drivers/list"].map((function(e){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(source,!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({text:e.tabnumber,value:e._id,count:t.count(e._id),borderColor:t.color(e._id)},e)})),n={green:0,yellow:1,red:2};return e=e.sort((function(a,b){return n[b.borderColor]-n[a.borderColor]})).sort((function(a,b){return b.count-a.count})),e=e.filter((function(e){var n=!0;return t.$store.getters["outfit/items"].forEach((function(r){["allDay","firstSmene","secondSmene"].forEach((function(t){e._id==r[t]&&(n=!1)})),e._id==r[t.field]&&r.wayId==t.way._id&&(n=!0)})),n})),e}},methods:{count:function(t){var e=0;return this.statistic[t]&&this.statistic[t][this.way._id]&&(e=this.statistic[t][this.way._id].count),e},color:function(t){var e=!1,n=!1;return this.statistic[t]&&this.statistic[t][this.way._id]&&(n=this.statistic[t][this.way._id].count,e=this.statistic[t][this.way._id].isKnow),n?"green":e?"yellow":"red"}}},O=n(548),k=n(550),j=Object(f.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{xs3:1===t.size,xs6:2===t.size}},[n("outfit-select",{attrs:{items:t.drivers,value:t.item[t.field]},on:{input:function(data){return t.$store.commit("outfit/set_field_value",{wayId:t.way._id,field:t.field,value:data})}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item;return[n("v-layout",{style:"border-right: 3px solid "+r.borderColor,attrs:{"justify-space-between":"","fill-height":""}},[n("span",[t._v(t._s(r.text))]),t._v(" "),n("span",{staticClass:"pr-2"},[t._v(t._s(r.count))])])]}}])})],1)}),[],!1,null,null,null),D=j.exports;v()(j,{VFlex:O.a,VLayout:k.a});function S(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var C={components:{OutfitSelect:_},props:["size","way","field"],data:function(){return{}},computed:{statistic:function(){return this.$store.getters["outfit/statistic"]},item:function(){return this.$store.getters["outfit/item"](this.way._id)},buses:function(){var t=this,e=this.$store.getters["buses/list"].map((function(e){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(source,!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):S(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({text:e.busnumber,value:e._id,count:t.count(e._id),borderColor:t.color(e._id)},e)})),n={green:0,yellow:1,red:2};return e=e.sort((function(a,b){return n[b.borderColor]-n[a.borderColor]})).sort((function(a,b){return b.count-a.count})),e=e.filter((function(e){var n=!0;return t.$store.getters["outfit/items"].forEach((function(r){e._id==r[t.field]&&r.wayId!=t.way._id&&(n=!1)})),n})),e}},methods:{count:function(t){var e=0;return this.statistic[t]&&this.statistic[t][this.way._id]&&(e=this.statistic[t][this.way._id].count),e},color:function(t){var e=!1,n=!1;return this.statistic[t]&&this.statistic[t][this.way._id]&&(n=this.statistic[t][this.way._id].count,e=this.statistic[t][this.way._id].isKnow),n?"green":e?"yellow":"red"}}},$=Object(f.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{xs3:1===t.size,xs6:2===t.size}},[n("outfit-select",{attrs:{items:t.buses,value:t.item[t.field]},on:{input:function(data){return t.$store.commit("outfit/set_field_value",{wayId:t.way._id,field:t.field,value:data})}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item;return[n("v-layout",{style:"border-right: 3px solid "+r.borderColor,attrs:{"justify-space-between":"","fill-height":""}},[n("span",[t._v(t._s(r.text))]),t._v(" "),n("span",{staticClass:"pr-2"},[t._v(t._s(r.count))])])]}}])})],1)}),[],!1,null,null,null),P=$.exports;v()($,{VFlex:O.a,VLayout:k.a});var V={components:{OutfitDriverSelect:D,OutfitBusSelect:P},props:["way","isWeekend"],data:function(){return{}},watch:{},computed:{isShow:function(){var t=this.way.isWeekend&&this.isWeekend||this.way.isWeekday&&!this.isWeekend;return t}},methods:{}},W=n(547),Y=Object(f.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShow?n("v-layout",{attrs:{"align-center":""}},[n("v-spacer"),t._v(" "),n("v-flex",{attrs:{xs2:""}},[t._v("Выход "+t._s(t.way.title))]),t._v(" "),n("outfit-bus-select",{key:t.way._id+"1",attrs:{size:1,way:t.way,field:"bus"}}),t._v(" "),t.way.isTwoSmene?t._e():n("outfit-driver-select",{key:t.way._id+"2",attrs:{size:1,way:t.way,field:"firstSmene"}}),t._v(" "),t.way.isTwoSmene?t._e():n("outfit-driver-select",{key:t.way._id+"3",attrs:{size:1,way:t.way,field:"secondSmene"}}),t._v(" "),t.way.isTwoSmene?n("outfit-driver-select",{key:t.way._id+"4",attrs:{size:2,way:t.way,field:"allDay"}}):t._e()],1):t._e()}),[],!1,null,null,null),A=Y.exports;v()(Y,{VFlex:O.a,VLayout:k.a,VSpacer:W.a});var E={components:{OutfitWay:A},props:["route","isWeekend"],computed:{isShow:function(){var t=this;return this.route.ways.reduce((function(a,b){return a+ +(b.isWeekend&&t.isWeekend||b.isWeekday&&!t.isWeekend)}),0)}},methods:{}},T=n(561),z=n(560),B=Object(f.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShow?n("v-card",{staticClass:"mb-3"},[n("v-card-title",[n("v-layout",{staticClass:"pl-3",attrs:{row:""}},[n("v-flex",{attrs:{xs3:""}},[n("h3",[t._v("Маршрут "+t._s(t.route.title))])]),t._v(" "),n("v-flex",{attrs:{xs3:""}},[t._v("Автобус")]),t._v(" "),n("v-flex",{attrs:{xs3:""}},[t._v("Первая смена")]),t._v(" "),n("v-flex",{attrs:{xs3:""}},[t._v("Вторая смена")])],1)],1),t._v(" "),n("v-card-text",t._l(t.route.ways,(function(e){return n("outfit-way",{key:e._id,attrs:{way:e,isWeekend:t.isWeekend}})})),1)],1):t._e()}),[],!1,null,null,null),I=B.exports;v()(B,{VCard:T.a,VCardText:z.b,VCardTitle:z.c,VFlex:O.a,VLayout:k.a});var L={props:["value"],data:function(){return{menu:!1}},computed:{formattedDate:function(){return this.value?c()(this.value).format("DD/MM/YYYY"):""}},methods:{changeDate:function(t){this.$emit("input",t),this.menu=!1},nextDay:function(){this.$emit("input",c()(this.value).add(1,"d").format("YYYY-MM-DD"))},prevDay:function(){this.$emit("input",c()(this.value).subtract(1,"d").format("YYYY-MM-DD"))}}},M=n(555),F=n(173),R=n(77),N=Object(f.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({staticClass:"desable-shadow mr-4",staticStyle:{"box-shadow":"none"},attrs:{flat:"",solo:"","hide-details":"",value:t.formattedDate,label:"Date",readonly:""}},r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),n("v-date-picker",{attrs:{value:t.value,"no-title":""},on:{change:t.changeDate}})],1)}),[],!1,null,null,null),H=N.exports;v()(N,{VDatePicker:M.a,VMenu:F.a,VTextField:R.a});var J,K={transition:"fade",components:{OutfitRoute:I,MenuDatePicker:H},data:function(){return{date:c()().format("YYYY-MM-DD")}},watch:{date:function(t){this.$store.dispatch("outfit/readByDate",{date:t})}},computed:{routes:function(){return this.$store.getters["routes/list"]},isWeekend:function(){return[0,6].includes(c()(this.date).day())}},methods:{save:function(){this.$store.dispatch("outfit/save")},nextDay:function(){this.$refs.datePicker.nextDay()},update:function(){this.$store.dispatch("buses/readAll")},prevDay:function(){this.$refs.datePicker.prevDay()}},mounted:(J=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$store.dispatch("routes/readAll"),this.$store.dispatch("drivers/readAll"),this.$store.dispatch("buses/readAll"),this.$store.dispatch("outfit/readByDate",{date:this.date});case 4:case"end":return t.stop()}}),t,this)}))),function(){return J.apply(this,arguments)})},X=n(107),Z=n(134),G=Object(f.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("v-card",{staticClass:"mb-3"},[n("v-card-title",{staticClass:"pt-2"},[n("v-flex",{attrs:{xs12:"",sm7:"",md4:""}},[n("v-layout",{attrs:{"align-center":"","justify-end":""}},[n("menu-date-picker",{ref:"datePicker",model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),n("v-btn",{attrs:{color:"white",elevation:"1",fab:"",small:""},on:{click:t.prevDay}},[n("v-icon",{attrs:{color:"grey darken-1"}},[t._v("fa-chevron-left")])],1),t._v(" "),n("v-btn",{staticClass:"ml-3",attrs:{color:"white",elevation:"1",fab:"",small:""},on:{click:t.update}},[n("v-icon",{attrs:{color:"grey darken-1"}},[t._v("fa-redo-alt")])],1),t._v(" "),n("v-btn",{staticClass:"ml-3",attrs:{color:"white",elevation:"1",fab:"",small:""},on:{click:t.nextDay}},[n("v-icon",{attrs:{color:"grey darken-1"}},[t._v("fa-chevron-right")])],1)],1)],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{dark:"",color:"green lighten-1"},on:{click:t.save}},[t._v("Сохранить")])],1)],1),t._v(" "),t._l(t.routes,(function(e){return n("outfit-route",{key:e._id,attrs:{route:e,isWeekend:t.isWeekend}})}))],2)}),[],!1,null,null,null);e.default=G.exports;v()(G,{VBtn:X.a,VCard:T.a,VCardTitle:z.c,VFlex:O.a,VIcon:Z.a,VLayout:k.a,VSpacer:W.a})}}]);